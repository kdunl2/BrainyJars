"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _widgets = require("@quarkly/widgets");

var _getLinks2 = _interopRequireDefault(require("./getLinks"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var getItems = function getItems(_ref) {
  var rootId = _ref.rootId,
      separator = _ref.separator,
      override = _ref.override;

  var _getLinks = (0, _getLinks2["default"])({
    rootId: rootId
  }),
      links = _getLinks.links,
      url = _getLinks.url;

  return links.map(function (link, i) {
    if (i !== links.length - 1) {
      var href = url.slice(0, url.findIndex(function (x) {
        return x.id === link.id;
      }) + 1).map(function (x) {
        return x.pageUrl;
      }).join('/');
      return [/*#__PURE__*/_react["default"].createElement(_widgets.Text, _extends({
        key: "separator-".concat(link.id)
      }, override('Separator', "Separator-".concat(i))), override('Separator', "Separator-".concat(i)).children || separator), /*#__PURE__*/_react["default"].createElement(_widgets.Link, _extends({
        key: "link-".concat(link.id),
        href: "/".concat(href)
      }, override('Link', "Link-".concat(i))), override('Link', "Link-".concat(i)).children || link.name)];
    }

    return [/*#__PURE__*/_react["default"].createElement(_widgets.Text, _extends({
      key: "separator-".concat(link.id)
    }, override('Separator', "Separator-".concat(i))), override('Link', "Link-".concat(i)).children || separator), /*#__PURE__*/_react["default"].createElement(_widgets.Text, _extends({
      key: "link-".concat(link.id)
    }, override('Text')), override('Link', "Link-".concat(i)).children || link.name)];
  });
};

var _default = getItems;
exports["default"] = _default;